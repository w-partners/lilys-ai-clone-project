"use strict";(self.webpackChunklilys_ai_clone_frontend=self.webpackChunklilys_ai_clone_frontend||[]).push([[910],{4910:(e,r,s)=>{s.r(r),s.d(r,{default:()=>Q});var t=s(5043),a=s(3216),n=s(6446),i=s(4194),o=s(1906),l=s(7392),c=s(5865),d=s(8483),x=s(8903),h=s(3336),m=s(8939),A=s(4056),y=s(9336),u=s(5721),j=s(5537),p=s(2050),g=s(8734),b=s(889),v=s(6605),f=s(710),w=s(6682),C=s(5795),k=s(2110),S=s(6494),F=s(3845),T=s(35),P=s(6600),I=s(5316),B=s(9347),$=s(7332),D=s(8606),R=s(6910),U=s(6625),_=s(7968),L=s(8293),W=s(2291),O=s(2039),z=s(416),G=s(3861),E=s(3817),K=s(3415),H=s(5254),M=s(7795),N=s(7842),Y=s(4505),Z=s(6867),q=s(3768),J=s(579);const Q=()=>{const{id:e}=(0,a.g)(),r=(0,a.Zp)(),[s,Q]=(0,t.useState)(null),[V,X]=(0,t.useState)(!0),[ee,re]=(0,t.useState)(0),[se,te]=(0,t.useState)(""),[ae,ne]=(0,t.useState)(!1),[ie,oe]=(0,t.useState)(""),[le,ce]=(0,t.useState)(!1),[de,xe]=(0,t.useState)(0),[he,me]=(0,t.useState)(null),[Ae,ye]=(0,t.useState)([]);(0,t.useEffect)(()=>{ue()},[e]);const ue=async()=>{try{const r=await Y.Ay.get(`/summaries/${e}`),s=r.data.data||r.data;if(Q(s),re((null===s||void 0===s?void 0:s.rating)||0),s.metadata&&("youtube"===s.sourceType&&s.originalContent&&me(s.originalContent),s.metadata.results)){const e=Object.entries(s.metadata.results).map(e=>{let[r,s]=e;return{category:r,name:s.name,content:s.content}});ye(e)}}catch(s){q.Ay.error("Failed to load summary"),r("/summaries")}finally{X(!1)}};return V?(0,J.jsx)(Z.A,{message:"Loading summary..."}):s?(0,J.jsxs)(n.A,{children:[(0,J.jsxs)(n.A,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,children:[(0,J.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,children:[(0,J.jsx)(l.A,{onClick:()=>r("/summaries"),children:(0,J.jsx)($.A,{})}),(0,J.jsx)(c.A,{variant:"h4",children:s.title})]}),(0,J.jsxs)(n.A,{display:"flex",gap:1,children:[(0,J.jsx)(d.A,{title:"Download",children:(0,J.jsx)(l.A,{onClick:async()=>{try{const r=await Y.Ay.get(`/summaries/${e}/download`,{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([r.data])),a=document.createElement("a");a.href=t,a.setAttribute("download",`${s.title}.pdf`),document.body.appendChild(a),a.click(),a.remove(),q.Ay.success("Summary downloaded successfully")}catch(r){q.Ay.error("Failed to download summary")}},children:(0,J.jsx)(_.A,{})})}),(0,J.jsx)(d.A,{title:"Share",children:(0,J.jsx)(l.A,{onClick:async()=>{try{const r=await Y.Ay.post(`/summaries/${e}/share`),s=`${window.location.origin}/share/${r.data.data.shareToken}`;oe(s),ne(!0)}catch(r){q.Ay.error("Failed to generate share link")}},children:(0,J.jsx)(E.A,{})})}),(0,J.jsx)(d.A,{title:"Delete",children:(0,J.jsx)(l.A,{onClick:()=>ce(!0),children:(0,J.jsx)(U.A,{})})})]})]}),(0,J.jsxs)(x.Ay,{container:!0,spacing:3,children:[(0,J.jsx)(x.Ay,{item:!0,xs:12,md:8,children:(0,J.jsxs)(h.A,{sx:{p:3},children:[Ae.length>0?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(m.A,{value:de,onChange:(e,r)=>xe(r),variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider",mb:3},children:Ae.map((e,r)=>(0,J.jsx)(A.A,{label:e.name||`Summary ${r+1}`,icon:(0,J.jsx)(G.A,{})},r))}),Ae.map((e,r)=>(0,J.jsxs)(n.A,{hidden:de!==r,sx:{py:2},children:[(0,J.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:e.name||"Summary"}),(0,J.jsx)(c.A,{variant:"body1",paragraph:!0,style:{whiteSpace:"pre-wrap"},children:e.content||s.summaryContent}),e.keyPoints&&e.keyPoints.length>0&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(y.A,{sx:{my:2}}),(0,J.jsx)(c.A,{variant:"subtitle1",gutterBottom:!0,children:"Key Points"}),(0,J.jsx)(u.A,{dense:!0,children:e.keyPoints.map((e,r)=>(0,J.jsxs)(j.Ay,{children:[(0,J.jsx)(p.A,{children:(0,J.jsx)(D.A,{color:"primary",fontSize:"small"})}),(0,J.jsx)(g.A,{primary:e})]},r))})]})]},r))]}):(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Summary"}),(0,J.jsx)(c.A,{variant:"body1",paragraph:!0,style:{whiteSpace:"pre-wrap"},children:s.summaryContent}),s.keyPoints&&s.keyPoints.length>0&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(y.A,{sx:{my:3}}),(0,J.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Key Points"}),(0,J.jsx)(u.A,{children:s.keyPoints.map((e,r)=>(0,J.jsxs)(j.Ay,{children:[(0,J.jsx)(p.A,{children:(0,J.jsx)(D.A,{color:"primary"})}),(0,J.jsx)(g.A,{primary:e})]},r))})]})]}),he&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(y.A,{sx:{my:3}}),(0,J.jsxs)(b.A,{children:[(0,J.jsx)(v.A,{expandIcon:(0,J.jsx)(L.A,{}),"aria-controls":"transcript-content",id:"transcript-header",children:(0,J.jsxs)(n.A,{display:"flex",alignItems:"center",gap:1,children:[(0,J.jsx)(K.A,{color:"error"}),(0,J.jsx)(c.A,{variant:"h6",children:"YouTube Transcript"})]})}),(0,J.jsx)(f.A,{children:(0,J.jsx)(n.A,{sx:{maxHeight:400,overflow:"auto"},children:(0,J.jsx)(c.A,{variant:"body2",component:"pre",sx:{whiteSpace:"pre-wrap",fontFamily:"monospace",backgroundColor:"grey.100",p:2,borderRadius:1},children:he})})})]})]}),(0,J.jsx)(y.A,{sx:{my:3}}),(0,J.jsxs)(n.A,{children:[(0,J.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Rate this summary"}),(0,J.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[(0,J.jsx)(w.A,{value:ee,onChange:(r,s)=>(async r=>{re(r);try{await Y.Ay.put(`/summaries/${e}/rating`,{rating:r}),q.Ay.success("Rating saved")}catch(s){q.Ay.error("Failed to save rating")}})(s),size:"large"}),(0,J.jsx)(c.A,{variant:"body2",color:"text.secondary",children:ee>0?`${ee} out of 5`:"Not rated yet"})]}),(0,J.jsx)(C.A,{fullWidth:!0,multiline:!0,rows:3,placeholder:"Share your feedback about this summary...",value:se,onChange:e=>te(e.target.value),sx:{mb:2}}),(0,J.jsx)(o.A,{variant:"outlined",startIcon:(0,J.jsx)(W.A,{}),onClick:async()=>{if(se.trim())try{await Y.Ay.post(`/summaries/${e}/feedback`,{feedback:se}),q.Ay.success("Feedback submitted. Thank you!"),te("")}catch(r){q.Ay.error("Failed to submit feedback")}},disabled:!se.trim(),children:"Submit Feedback"})]})]})}),(0,J.jsx)(x.Ay,{item:!0,xs:12,md:4,children:(0,J.jsx)(k.A,{children:(0,J.jsxs)(S.A,{children:[(0,J.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Details"}),(0,J.jsxs)(n.A,{display:"flex",flexDirection:"column",gap:2,children:[(0,J.jsxs)(n.A,{children:[(0,J.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Source Type"}),(0,J.jsxs)(n.A,{display:"flex",alignItems:"center",gap:1,children:[(()=>{switch(null===s||void 0===s?void 0:s.sourceType){case"file":default:return(0,J.jsx)(O.A,{});case"url":return(0,J.jsx)(z.A,{});case"text":return(0,J.jsx)(H.A,{})}})(),(0,J.jsx)(c.A,{variant:"body1",children:s.sourceType.charAt(0).toUpperCase()+s.sourceType.slice(1)})]})]}),s.sourceUrl&&(0,J.jsxs)(n.A,{children:[(0,J.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Source URL"}),(0,J.jsx)(c.A,{variant:"body2",component:"a",href:s.sourceUrl,target:"_blank",rel:"noopener noreferrer",sx:{color:"primary.main",textDecoration:"none"},children:s.sourceUrl})]}),(0,J.jsxs)(n.A,{children:[(0,J.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"AI Provider"}),(0,J.jsx)(F.A,{label:"openai"===s.provider?"OpenAI GPT":"Google Gemini",size:"small"})]}),(0,J.jsxs)(n.A,{children:[(0,J.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Processing Time"}),(0,J.jsxs)(n.A,{display:"flex",alignItems:"center",gap:.5,children:[(0,J.jsx)(M.A,{fontSize:"small"}),(0,J.jsxs)(c.A,{variant:"body1",children:[(s.processingTime/1e3).toFixed(1),"s"]})]})]}),(0,J.jsxs)(n.A,{children:[(0,J.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Created"}),(0,J.jsx)(c.A,{variant:"body1",children:(0,N.A)(new Date(s.createdAt),"PPpp")})]}),s.metadata&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(y.A,{}),(0,J.jsx)(c.A,{variant:"subtitle2",gutterBottom:!0,children:"Statistics"}),s.metadata.wordCount&&(0,J.jsxs)(n.A,{display:"flex",justifyContent:"space-between",children:[(0,J.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Original Words:"}),(0,J.jsx)(c.A,{variant:"body2",children:s.metadata.wordCount.toLocaleString()})]}),s.metadata.summaryWordCount&&(0,J.jsxs)(n.A,{display:"flex",justifyContent:"space-between",children:[(0,J.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Summary Words:"}),(0,J.jsx)(c.A,{variant:"body2",children:s.metadata.summaryWordCount.toLocaleString()})]}),s.metadata.compressionRatio&&(0,J.jsxs)(n.A,{display:"flex",justifyContent:"space-between",children:[(0,J.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Compression:"}),(0,J.jsxs)(c.A,{variant:"body2",children:[Math.round(100*s.metadata.compressionRatio),"%"]})]})]})]})]})})})]}),(0,J.jsxs)(T.A,{open:ae,onClose:()=>ne(!1),children:[(0,J.jsx)(P.A,{children:"Share Summary"}),(0,J.jsxs)(I.A,{children:[(0,J.jsx)(c.A,{variant:"body2",paragraph:!0,children:"Anyone with this link can view the summary:"}),(0,J.jsx)(C.A,{fullWidth:!0,value:ie,InputProps:{readOnly:!0,endAdornment:(0,J.jsx)(l.A,{onClick:()=>{navigator.clipboard.writeText(ie),q.Ay.success("Share link copied to clipboard!")},children:(0,J.jsx)(R.A,{})})}})]}),(0,J.jsx)(B.A,{children:(0,J.jsx)(o.A,{onClick:()=>ne(!1),children:"Close"})})]}),(0,J.jsxs)(T.A,{open:le,onClose:()=>ce(!1),children:[(0,J.jsx)(P.A,{children:"Delete Summary"}),(0,J.jsx)(I.A,{children:(0,J.jsx)(c.A,{children:"Are you sure you want to delete this summary? This action cannot be undone."})}),(0,J.jsxs)(B.A,{children:[(0,J.jsx)(o.A,{onClick:()=>ce(!1),children:"Cancel"}),(0,J.jsx)(o.A,{onClick:async()=>{try{await Y.Ay.delete(`/summaries/${e}`),q.Ay.success("Summary deleted successfully"),r("/summaries")}catch(s){q.Ay.error("Failed to delete summary")}},color:"error",variant:"contained",children:"Delete"})]})]})]}):(0,J.jsxs)(n.A,{children:[(0,J.jsx)(i.A,{severity:"error",children:"Summary not found"}),(0,J.jsx)(o.A,{startIcon:(0,J.jsx)($.A,{}),onClick:()=>r("/summaries"),sx:{mt:2},children:"Back to Summaries"})]})}}}]);
//# sourceMappingURL=910.af6ce88b.chunk.js.map