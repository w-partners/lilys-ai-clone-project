"use strict";(self.webpackChunklilys_ai_clone_frontend=self.webpackChunklilys_ai_clone_frontend||[]).push([[167],{141:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(9662),r=a(579);const o=(0,s.A)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},3560:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(9662),r=a(579);const o=(0,s.A)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},4598:(e,t,a)=>{a.d(t,{A:()=>f});var s=a(8587),r=a(8168),o=a(5043),l=a(8387),i=a(8610),n=a(7266),c=a(6803),d=a(3064),h=a(4535),p=a(8206),m=a(2532),u=a(2372);function v(e){return(0,u.Ay)("MuiSwitch",e)}const x=(0,m.A)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]);var A=a(579);const g=["className","color","edge","size","sx"],y=(0,h.Ay)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.edge&&t[`edge${(0,c.A)(a.edge)}`],t[`size${(0,c.A)(a.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${x.thumb}`]:{width:16,height:16},[`& .${x.switchBase}`]:{padding:4,[`&.${x.checked}`]:{transform:"translateX(16px)"}}}}]}),j=(0,h.Ay)(d.A,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.switchBase,{[`& .${x.input}`]:t.input},"default"!==a.color&&t[`color${(0,c.A)(a.color)}`]]}})(e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${"light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${x.checked}`]:{transform:"translateX(20px)"},[`&.${x.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${"light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${x.checked} + .${x.track}`]:{opacity:.5},[`&.${x.disabled} + .${x.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:""+("light"===t.palette.mode?.12:.2)},[`& .${x.input}`]:{left:"-100%",width:"300%"}}},e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,n.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.light}).map(e=>{let[a]=e;return{props:{color:a},style:{[`&.${x.checked}`]:{color:(t.vars||t).palette[a].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[a].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,n.X4)(t.palette[a].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${x.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${a}DisabledColor`]:`${"light"===t.palette.mode?(0,n.a)(t.palette[a].main,.62):(0,n.e$)(t.palette[a].main,.55)}`}},[`&.${x.checked} + .${x.track}`]:{backgroundColor:(t.vars||t).palette[a].main}}}})]}}),b=(0,h.Ay)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${"light"===t.palette.mode?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:""+("light"===t.palette.mode?.38:.3)}}),w=(0,h.Ay)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}}),f=o.forwardRef(function(e,t){const a=(0,p.b)({props:e,name:"MuiSwitch"}),{className:o,color:n="primary",edge:d=!1,size:h="medium",sx:m}=a,u=(0,s.A)(a,g),x=(0,r.A)({},a,{color:n,edge:d,size:h}),f=(e=>{const{classes:t,edge:a,size:s,color:o,checked:l,disabled:n}=e,d={root:["root",a&&`edge${(0,c.A)(a)}`,`size${(0,c.A)(s)}`],switchBase:["switchBase",`color${(0,c.A)(o)}`,l&&"checked",n&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},h=(0,i.A)(d,v,t);return(0,r.A)({},t,h)})(x),k=(0,A.jsx)(w,{className:f.thumb,ownerState:x});return(0,A.jsxs)(y,{className:(0,l.A)(f.root,o),sx:m,ownerState:x,children:[(0,A.jsx)(j,(0,r.A)({type:"checkbox",icon:k,checkedIcon:k,ref:t,ownerState:x},u,{classes:(0,r.A)({},f,{root:f.switchBase})})),(0,A.jsx)(b,{className:f.track,ownerState:x})]})})},7141:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(9662),r=a(579);const o=(0,s.A)((0,r.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save")},8167:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var s=a(5043),r=a(9252),o=a(3336),l=a(6446),i=a(5865),n=a(1906),c=a(4194),d=a(9650),h=a(1806),p=a(4882),m=a(8076),u=a(2420),v=a(3460),x=a(7392),A=a(3845),g=a(4598),y=a(35),j=a(6600),b=a(5316),w=a(5795),f=a(3193),k=a(8356),S=a(9285),$=a(2143),C=a(4605),z=a(9347),M=a(141),I=a(9662),R=a(579);const T=(0,I.A)((0,R.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),L=(0,I.A)((0,R.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward");var _=a(3560),B=a(6625);const W=(0,I.A)((0,R.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel");var E=a(7141),O=a(3216),V=a(5016),D=a(4505);function N(){const{user:e}=(0,V.A)(),t=(0,O.Zp)(),[a,I]=(0,s.useState)([]),[N,F]=(0,s.useState)(!1),[P,X]=(0,s.useState)(""),[H,q]=(0,s.useState)(""),[U,Z]=(0,s.useState)(!1),[G,J]=(0,s.useState)(null),[K,Q]=(0,s.useState)({name:"",category:"summary",prompt:"",description:"",isActive:!0,order:1});(0,s.useEffect)(()=>{console.log("Prompts state changed:",a,"length:",a.length)},[a]);const Y=[{value:"script",label:"\uc2a4\ud06c\ub9bd\ud2b8"},{value:"transcript",label:"\ud0c0\uc784\uc2a4\ud0ec\ud504"},{value:"summary",label:"\uc694\uc57d"},{value:"analysis",label:"\ubd84\uc11d"},{value:"action_points",label:"\ud575\uc2ec \ud3ec\uc778\ud2b8"},{value:"scene_analysis",label:"\uc7a5\uba74 \ubd84\uc11d"},{value:"blog_seo",label:"\ube14\ub85c\uadf8 SEO"},{value:"custom",label:"\uc0ac\uc6a9\uc790 \uc815\uc758"}];(0,s.useEffect)(()=>{e&&"admin"===e.role?(console.log("useEffect: Loading prompts..."),ee()):t("/")},[e,t]),(0,s.useEffect)(()=>{e&&"admin"===e.role&&(console.log("Reloading prompts after mount..."),ee())},[]);const ee=async()=>{F(!0),X("");try{console.log("Loading prompts from /api/system-prompts...");const e=await D.Ay.get("/system-prompts");if(console.log("Response:",e.data),e.data&&e.data.data){const t=e.data.data;console.log("Setting prompts state with:",t),console.log("Prompts data length:",t.length),setTimeout(()=>{I(t),console.log("Prompts state updated with setTimeout")},0)}else console.log("No data in response"),I([])}catch(P){console.error("Failed to load prompts:",P),X("\ud504\ub86c\ud504\ud2b8\ub97c \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),I([])}finally{F(!1)}},te=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t;e?(J(e),Q({name:e.name,category:e.category,prompt:e.promptText,description:(null===(t=e.metadata)||void 0===t?void 0:t.description)||e.description||"",isActive:e.isActive,order:e.orderIndex})):(J(null),Q({name:"",category:"summary",prompt:"",description:"",isActive:!0,order:a.length+1}));Z(!0)},ae=()=>{Z(!1),J(null),Q({name:"",category:"summary",prompt:"",description:"",isActive:!0,order:1})},se=async(e,t)=>{const s=a.findIndex(t=>t.id===e.id),r="up"===t?s-1:s+1;if(r<0||r>=a.length)return;const o=[...a],l=o[s];o[s]=o[r],o[r]=l;try{await Promise.all(o.map((e,t)=>D.Ay.put(`/system-prompts/${e.id}`,{...e,order:t+1}))),ee()}catch(P){console.error("Failed to reorder:",P),X("\uc21c\uc11c \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}};return(0,R.jsx)(r.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:(0,R.jsxs)(o.A,{sx:{p:4},children:[(0,R.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,R.jsx)(i.A,{variant:"h4",component:"h1",children:"\uc2dc\uc2a4\ud15c \ud504\ub86c\ud504\ud2b8 \uad00\ub9ac"}),(0,R.jsx)(n.A,{variant:"contained",startIcon:(0,R.jsx)(M.A,{}),onClick:()=>te(),children:"\uc0c8 \ud504\ub86c\ud504\ud2b8 \ucd94\uac00"})]}),P&&(0,R.jsx)(c.A,{severity:"error",sx:{mb:2},onClose:()=>X(""),children:P}),H&&(0,R.jsx)(c.A,{severity:"success",sx:{mb:2},onClose:()=>q(""),children:H}),(0,R.jsx)(d.A,{children:(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{children:(0,R.jsxs)(m.A,{children:[(0,R.jsx)(u.A,{children:"\uc21c\uc11c"}),(0,R.jsx)(u.A,{children:"\uc774\ub984"}),(0,R.jsx)(u.A,{children:"\uce74\ud14c\uace0\ub9ac"}),(0,R.jsx)(u.A,{children:"\ud504\ub86c\ud504\ud2b8"}),(0,R.jsx)(u.A,{children:"\uc0c1\ud0dc"}),(0,R.jsx)(u.A,{align:"center",children:"\uc791\uc5c5"})]})}),(0,R.jsxs)(v.A,{children:[console.log("Rendering table body, prompts:",a,"length:",a.length),0===a.length?(0,R.jsx)(m.A,{children:(0,R.jsx)(u.A,{colSpan:6,align:"center",children:"\ud504\ub86c\ud504\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})}):a.map((e,t)=>{var s,r,o;return(0,R.jsxs)(m.A,{children:[(0,R.jsx)(u.A,{children:(0,R.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[t+1,(0,R.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,R.jsx)(x.A,{size:"small",disabled:0===t,onClick:()=>se(e,"up"),children:(0,R.jsx)(T,{fontSize:"small"})}),(0,R.jsx)(x.A,{size:"small",disabled:t===a.length-1,onClick:()=>se(e,"down"),children:(0,R.jsx)(L,{fontSize:"small"})})]})]})}),(0,R.jsxs)(u.A,{children:[(0,R.jsx)(i.A,{variant:"subtitle2",children:e.name}),((null===(s=e.metadata)||void 0===s?void 0:s.description)||e.description)&&(0,R.jsx)(i.A,{variant:"caption",color:"text.secondary",children:(null===(r=e.metadata)||void 0===r?void 0:r.description)||e.description})]}),(0,R.jsx)(u.A,{children:(0,R.jsx)(A.A,{label:(null===(o=Y.find(t=>t.value===e.category))||void 0===o?void 0:o.label)||e.category,size:"small",variant:"outlined"})}),(0,R.jsx)(u.A,{children:(0,R.jsx)(i.A,{variant:"body2",sx:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e.promptText,children:e.promptText})}),(0,R.jsxs)(u.A,{children:[(0,R.jsx)(g.A,{checked:e.isActive,onChange:()=>(async e=>{try{(await D.Ay.put(`/system-prompts/${e.id}`,{...e,isActive:!e.isActive})).data.success&&ee()}catch(P){console.error("Failed to toggle active:",P),X("\uc0c1\ud0dc \ubcc0\uacbd\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}})(e),size:"small"}),(0,R.jsx)(i.A,{variant:"caption",children:e.isActive?"\ud65c\uc131":"\ube44\ud65c\uc131"})]}),(0,R.jsxs)(u.A,{align:"center",children:[(0,R.jsx)(x.A,{size:"small",onClick:()=>te(e),children:(0,R.jsx)(_.A,{})}),(0,R.jsx)(x.A,{size:"small",color:"error",onClick:()=>(async e=>{if(window.confirm("\uc815\ub9d0\ub85c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){X(""),q("");try{(await D.Ay.delete(`/system-prompts/${e}`)).data.success&&(q("\ud504\ub86c\ud504\ud2b8\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),ee())}catch(P){console.error("Failed to delete prompt:",P),X("\uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}}})(e.id),children:(0,R.jsx)(B.A,{})})]})]},e.id)})]})]})}),(0,R.jsxs)(y.A,{open:U,onClose:ae,maxWidth:"md",fullWidth:!0,children:[(0,R.jsx)(j.A,{children:G?"\ud504\ub86c\ud504\ud2b8 \uc218\uc815":"\uc0c8 \ud504\ub86c\ud504\ud2b8 \ucd94\uac00"}),(0,R.jsx)(b.A,{children:(0,R.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[(0,R.jsx)(w.A,{label:"\uc774\ub984",value:K.name,onChange:e=>Q({...K,name:e.target.value}),fullWidth:!0,required:!0}),(0,R.jsxs)(f.A,{fullWidth:!0,children:[(0,R.jsx)(k.A,{children:"\uce74\ud14c\uace0\ub9ac"}),(0,R.jsx)(S.A,{value:K.category,onChange:e=>Q({...K,category:e.target.value}),label:"\uce74\ud14c\uace0\ub9ac",children:Y.map(e=>(0,R.jsx)($.A,{value:e.value,children:e.label},e.value))})]}),(0,R.jsx)(w.A,{label:"\uc124\uba85 (\uc120\ud0dd\uc0ac\ud56d)",value:K.description,onChange:e=>Q({...K,description:e.target.value}),fullWidth:!0,multiline:!0,rows:2}),(0,R.jsx)(w.A,{label:"\ud504\ub86c\ud504\ud2b8",value:K.prompt,onChange:e=>Q({...K,prompt:e.target.value}),fullWidth:!0,required:!0,multiline:!0,rows:6,helperText:"AI\uc5d0\uac8c \uc804\ub2ec\ub420 \uc2dc\uc2a4\ud15c \ud504\ub86c\ud504\ud2b8\ub97c \uc785\ub825\ud558\uc138\uc694."}),(0,R.jsx)(C.A,{control:(0,R.jsx)(g.A,{checked:K.isActive,onChange:e=>Q({...K,isActive:e.target.checked})}),label:"\ud65c\uc131\ud654"})]})}),(0,R.jsxs)(z.A,{children:[(0,R.jsx)(n.A,{onClick:ae,startIcon:(0,R.jsx)(W,{}),children:"\ucde8\uc18c"}),(0,R.jsx)(n.A,{onClick:async()=>{if(X(""),q(""),K.name&&K.prompt)try{if(G){(await D.Ay.put(`/system-prompts/${G.id}`,K)).data.success&&(q("\ud504\ub86c\ud504\ud2b8\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),ae(),ee())}else{(await D.Ay.post("/system-prompts",K)).data.success&&(q("\ud504\ub86c\ud504\ud2b8\uac00 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),ae(),ee())}}catch(P){var e,t;console.error("Failed to save prompt:",P),X((null===(e=P.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"\uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}else X("\uc774\ub984\uacfc \ud504\ub86c\ud504\ud2b8\ub294 \ud544\uc218\uc785\ub2c8\ub2e4.")},variant:"contained",startIcon:(0,R.jsx)(E.A,{}),children:"\uc800\uc7a5"})]})]})]})})}}}]);
//# sourceMappingURL=167.df8e5bf1.chunk.js.map