"use strict";(self.webpackChunklilys_ai_clone_frontend=self.webpackChunklilys_ai_clone_frontend||[]).push([[122],{141:(e,s,r)=>{r.d(s,{A:()=>l});var i=r(9662),n=r(579);const l=(0,i.A)((0,n.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},3122:(e,s,r)=>{r.r(s),r.d(s,{default:()=>h});r(5043);var i=r(9252),n=r(5865),l=r(3336),t=r(8903),a=r(3845),o=r(4194),d=r(9893),c=r(5016),A=r(3860),y=r(579);const h=function(){const{user:e}=(0,c.A)();return(0,y.jsxs)(i.A,{maxWidth:"md",sx:{py:4},children:[(0,y.jsxs)(n.A,{variant:"h4",gutterBottom:!0,display:"flex",alignItems:"center",children:[(0,y.jsx)(d.A,{sx:{mr:2,fontSize:40}}),"Profile"]}),(0,y.jsxs)(l.A,{sx:{p:3,mb:3},children:[(0,y.jsx)(n.A,{variant:"h6",gutterBottom:!0,children:"User Information"}),(0,y.jsxs)(t.Ay,{container:!0,spacing:2,children:[(0,y.jsxs)(t.Ay,{item:!0,xs:12,sm:6,children:[(0,y.jsx)(n.A,{variant:"body2",color:"textSecondary",children:"Name"}),(0,y.jsx)(n.A,{variant:"body1",fontWeight:"medium",children:(null===e||void 0===e?void 0:e.name)||"N/A"})]}),(0,y.jsxs)(t.Ay,{item:!0,xs:12,sm:6,children:[(0,y.jsx)(n.A,{variant:"body2",color:"textSecondary",children:"Phone"}),(0,y.jsx)(n.A,{variant:"body1",fontWeight:"medium",children:(null===e||void 0===e?void 0:e.phone)||"N/A"})]}),(0,y.jsxs)(t.Ay,{item:!0,xs:12,sm:6,children:[(0,y.jsx)(n.A,{variant:"body2",color:"textSecondary",children:"Email"}),(0,y.jsx)(n.A,{variant:"body1",fontWeight:"medium",children:(null===e||void 0===e?void 0:e.email)||"Not set"})]}),(0,y.jsxs)(t.Ay,{item:!0,xs:12,sm:6,children:[(0,y.jsx)(n.A,{variant:"body2",color:"textSecondary",children:"Role"}),(0,y.jsx)(a.A,{label:(null===e||void 0===e?void 0:e.role)||"user",color:"admin"===(null===e||void 0===e?void 0:e.role)?"error":"primary",size:"small"})]})]})]}),"admin"===(null===e||void 0===e?void 0:e.role)?(0,y.jsx)(A.A,{}):(0,y.jsx)(o.A,{severity:"info",children:"API key management is only available for administrators."})]})}},3559:(e,s,r)=>{r.d(s,{A:()=>l});var i=r(9662),n=r(579);const l=(0,i.A)((0,n.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff")},3560:(e,s,r)=>{r.d(s,{A:()=>l});var i=r(9662),n=r(579);const l=(0,i.A)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},3632:(e,s,r)=>{r.d(s,{A:()=>l});var i=r(9662),n=r(579);const l=(0,i.A)((0,n.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},3860:(e,s,r)=>{r.d(s,{A:()=>L});var i=r(5043),n=r(6446),l=r(3336),t=r(5865),a=r(1906),o=r(1637),d=r(4194),c=r(5721),A=r(5537),y=r(8734),h=r(3845),x=r(8903),u=r(7392),m=r(8266),j=r(8483),v=r(35),p=r(6600),g=r(5316),f=r(3193),k=r(8356),b=r(9285),C=r(2143),I=r(5795),P=r(9347),z=r(7548),w=r(8606),S=r(141),K=r(3559),M=r(3632),W=r(6910),F=r(9662),E=r(579);const V=(0,F.A)((0,E.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");var N=r(3560),U=r(6625),$=r(6213),_=r(3768);const G=$.A.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});G.interceptors.request.use(e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e}),G.interceptors.response.use(e=>e.data,e=>{var s;return 401===(null===(s=e.response)||void 0===s?void 0:s.status)&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});const L=function(){const[e,s]=(0,i.useState)([]),[r,F]=(0,i.useState)(!0),[$,L]=(0,i.useState)({}),[O,H]=(0,i.useState)(!1),[R,T]=(0,i.useState)(null),[B,D]=(0,i.useState)({provider:"gemini",key:"",name:""}),[q,J]=(0,i.useState)(null),Q=async()=>{try{F(!0);const e=await G.get("/keys");s(e.data||[])}catch(e){console.error("Failed to fetch keys:",e),_.Ay.error("Failed to load API keys")}finally{F(!1)}};(0,i.useEffect)(()=>{Q()},[]);const X=e=>{switch(e){case"gemini":return"Google Gemini";case"openai":return"OpenAI";default:return e}},Y=e=>e.errorCount>5?(0,E.jsx)(z.A,{color:"error"}):e.usageCount>0?(0,E.jsx)(w.A,{color:"success"}):null;return(0,E.jsxs)(n.A,{children:[(0,E.jsxs)(l.A,{sx:{p:3},children:[(0,E.jsxs)(n.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,E.jsx)(t.A,{variant:"h6",children:"API Key Management"}),(0,E.jsx)(a.A,{variant:"contained",startIcon:(0,E.jsx)(S.A,{}),onClick:()=>{T(null),D({provider:"gemini",key:"",name:""}),H(!0)},color:"primary",children:"Add API Key"})]}),r?(0,E.jsx)(n.A,{display:"flex",justifyContent:"center",py:4,children:(0,E.jsx)(o.A,{})}):0===e.length?(0,E.jsx)(d.A,{severity:"info",children:'No API keys configured. Click "Add API Key" to get started.'}):(0,E.jsx)(c.A,{children:e.map(e=>(0,E.jsxs)(A.Ay,{sx:{mb:2,bgcolor:"background.paper",border:1,borderColor:"divider",borderRadius:1},children:[(0,E.jsx)(y.A,{primary:(0,E.jsxs)(n.A,{display:"flex",alignItems:"center",gap:1,children:[Y(e),(0,E.jsx)(t.A,{variant:"subtitle1",fontWeight:"medium",children:e.name||`${X(e.provider)} Key`}),(0,E.jsx)(h.A,{label:e.provider,size:"small",color:"gemini"===e.provider?"primary":"secondary"}),e.isActive&&(0,E.jsx)(h.A,{label:"Active",size:"small",color:"success"})]}),secondary:(0,E.jsx)(n.A,{mt:1,children:(0,E.jsxs)(x.Ay,{container:!0,spacing:2,children:[(0,E.jsx)(x.Ay,{item:!0,xs:12,children:(0,E.jsxs)(n.A,{display:"flex",alignItems:"center",gap:1,children:[(0,E.jsx)(t.A,{variant:"body2",fontFamily:"monospace",sx:{bgcolor:"grey.100",p:1,borderRadius:1,flex:1},children:$[e.id]?e.fullKey:e.key}),(0,E.jsx)(u.A,{size:"small",onClick:()=>{return s=e.id,void L(e=>({...e,[s]:!e[s]}));var s},children:$[e.id]?(0,E.jsx)(K.A,{}):(0,E.jsx)(M.A,{})}),(0,E.jsx)(u.A,{size:"small",onClick:()=>{return s=e.fullKey,navigator.clipboard.writeText(s),void _.Ay.success("Copied to clipboard");var s},children:(0,E.jsx)(W.A,{})})]})}),(0,E.jsx)(x.Ay,{item:!0,xs:12,children:(0,E.jsxs)(n.A,{display:"flex",gap:2,alignItems:"center",children:[(0,E.jsxs)(t.A,{variant:"caption",children:["Usage: ",e.usageCount||0]}),e.errorCount>0&&(0,E.jsxs)(t.A,{variant:"caption",color:"error",children:["Errors: ",e.errorCount]}),e.lastUsedAt&&(0,E.jsxs)(t.A,{variant:"caption",color:"textSecondary",children:["Last used: ",new Date(e.lastUsedAt).toLocaleString()]})]})})]})})}),(0,E.jsx)(m.A,{children:(0,E.jsxs)(n.A,{display:"flex",gap:1,children:[(0,E.jsx)(j.A,{title:"Test Connection",children:(0,E.jsx)(u.A,{size:"small",onClick:()=>(async e=>{try{J(e.id);const s=await G.post(`/keys/test/${e.id}`);"connected"===s.data.status?_.Ay.success(s.data.message):_.Ay.error(s.data.message)}catch(s){console.error("Failed to test key:",s),_.Ay.error("Failed to test API key")}finally{J(null)}})(e),disabled:q===e.id,children:q===e.id?(0,E.jsx)(o.A,{size:20}):(0,E.jsx)(V,{})})}),(0,E.jsx)(j.A,{title:"Edit",children:(0,E.jsx)(u.A,{size:"small",onClick:()=>(e=>{T(e),D({provider:e.provider,key:e.fullKey||"",name:e.name||""}),H(!0)})(e),children:(0,E.jsx)(N.A,{})})}),(0,E.jsx)(j.A,{title:"Delete",children:(0,E.jsx)(u.A,{size:"small",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this API key?"))try{await G.delete(`/keys/${e}`),_.Ay.success("API key deleted successfully"),Q()}catch(s){console.error("Failed to delete key:",s),_.Ay.error("Failed to delete API key")}})(e.id),color:"error",children:(0,E.jsx)(U.A,{})})})]})})]},e.id))})]}),(0,E.jsxs)(v.A,{open:O,onClose:()=>H(!1),maxWidth:"sm",fullWidth:!0,children:[(0,E.jsx)(p.A,{children:R?"Edit API Key":"Add New API Key"}),(0,E.jsx)(g.A,{children:(0,E.jsxs)(n.A,{display:"flex",flexDirection:"column",gap:2,mt:1,children:[(0,E.jsxs)(f.A,{fullWidth:!0,children:[(0,E.jsx)(k.A,{children:"Provider"}),(0,E.jsxs)(b.A,{value:B.provider,onChange:e=>D({...B,provider:e.target.value}),label:"Provider",children:[(0,E.jsx)(C.A,{value:"gemini",children:"Google Gemini"}),(0,E.jsx)(C.A,{value:"openai",children:"OpenAI"})]})]}),(0,E.jsx)(I.A,{fullWidth:!0,label:"API Key",value:B.key,onChange:e=>D({...B,key:e.target.value}),placeholder:`Enter your ${"gemini"===B.provider?"Gemini":"OpenAI"} API key`,type:"password",required:!0}),(0,E.jsx)(I.A,{fullWidth:!0,label:"Name (Optional)",value:B.name,onChange:e=>D({...B,name:e.target.value}),placeholder:"e.g., Production Key, Test Key"})]})}),(0,E.jsxs)(P.A,{children:[(0,E.jsx)(a.A,{onClick:()=>H(!1),children:"Cancel"}),(0,E.jsx)(a.A,{onClick:async()=>{try{if(!B.key)return void _.Ay.error("Please enter an API key");R?(await G.put(`/keys/${R.id}`,B),_.Ay.success("API key updated successfully")):(await G.post("/keys",B),_.Ay.success("API key added successfully")),H(!1),T(null),D({provider:"gemini",key:"",name:""}),Q()}catch(r){var e,s;console.error("Failed to save key:",r),_.Ay.error((null===(e=r.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.error)||"Failed to save API key")}},variant:"contained",disabled:!B.key,children:R?"Update":"Add"})]})]})]})}},6910:(e,s,r)=>{r.d(s,{A:()=>l});var i=r(9662),n=r(579);const l=(0,i.A)((0,n.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy")},7548:(e,s,r)=>{r.d(s,{A:()=>l});var i=r(9662),n=r(579);const l=(0,i.A)((0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error")}}]);
//# sourceMappingURL=122.d69fd8b8.chunk.js.map