"use strict";(self.webpackChunklilys_ai_clone_frontend=self.webpackChunklilys_ai_clone_frontend||[]).push([[479],{7479:(e,s,t)=>{t.r(s),t.d(s,{default:()=>O});var r=t(5043),n=t(3336),l=t(6446),o=t(5865),i=t(2110),a=t(6494),c=t(3845),d=t(611),u=t(7600),x=t(1906),m=t(8903),j=t(8939),h=t(4056),p=t(4194),A=t(5795),v=t(1787),b=t(1637),y=t(8483),f=t(7392),g=t(9336),w=t(8994),C=t(8606),S=t(3374),I=t(6910),T=t(3360),k=t(1954),W=t(3861),z=t(7805),P=t(5874),B=t(1781),R=t(2796),U=t(5835),M=t(3216),D=t(5016),Y=t(1657),$=t(9693),_=t(4505),E=t(6867),F=t(3768),L=t(579);const V=e=>{let{title:s,value:t,icon:r,color:i="primary",trend:a}=e;return(0,L.jsx)(n.A,{sx:{p:3},children:(0,L.jsxs)(l.A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,L.jsxs)(l.A,{children:[(0,L.jsx)(o.A,{color:"text.secondary",variant:"body2",gutterBottom:!0,children:s}),(0,L.jsx)(o.A,{variant:"h4",fontWeight:"bold",children:t}),a&&(0,L.jsxs)(l.A,{display:"flex",alignItems:"center",mt:1,children:[(0,L.jsx)(R.A,{fontSize:"small",color:"success"}),(0,L.jsxs)(o.A,{variant:"body2",color:"success.main",ml:.5,children:[a,"% from last week"]})]})]}),(0,L.jsx)(l.A,{sx:{backgroundColor:`${i}.light`,borderRadius:2,p:1.5,display:"flex",alignItems:"center",justifyContent:"center"},children:r})]})})},X=e=>{let{summary:s,onView:t}=e;return(0,L.jsxs)(i.A,{sx:{height:"100%"},children:[(0,L.jsxs)(a.A,{children:[(0,L.jsxs)(l.A,{display:"flex",justifyContent:"space-between",alignItems:"start",mb:1,children:[(0,L.jsx)(o.A,{variant:"h6",noWrap:!0,sx:{maxWidth:"70%"},children:s.title}),(0,L.jsx)(c.A,{label:(e=>{switch(e){case"completed":return"Completed";case"processing":return"Processing";case"failed":return"Failed";default:return e}})(s.status),color:(e=>{switch(e){case"completed":return"success";case"processing":return"info";case"failed":return"error";default:return"default"}})(s.status),size:"small",variant:"filled"})]}),(0,L.jsx)(o.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:s.preview||"Processing..."}),(0,L.jsxs)(l.A,{display:"flex",gap:1,flexWrap:"wrap",children:[(0,L.jsx)(c.A,{icon:(0,L.jsx)(o.A,{children:(e=>{switch(e){case"openai":return"\ud83e\udd16";case"gemini":return"\u2728";default:return"\ud83d\udcc4"}})(s.provider)}),label:s.provider,size:"small",variant:"outlined"}),(0,L.jsx)(c.A,{label:s.sourceType,size:"small",variant:"outlined"}),(0,L.jsx)(o.A,{variant:"caption",color:"text.secondary",sx:{ml:"auto"},children:(0,$.A)(new Date(s.createdAt),{addSuffix:!0})})]}),"processing"===s.status&&s.progress&&(0,L.jsxs)(l.A,{mt:2,children:[(0,L.jsx)(d.A,{variant:"determinate",value:s.progress}),(0,L.jsxs)(o.A,{variant:"caption",color:"text.secondary",children:[s.progress,"% complete"]})]})]}),(0,L.jsx)(u.A,{children:(0,L.jsx)(x.A,{size:"small",onClick:()=>t(s.id),disabled:"completed"!==s.status,endIcon:(0,L.jsx)(w.A,{}),children:"View Summary"})})]})};function H(e){let{children:s,value:t,index:r,...n}=e;return(0,L.jsx)("div",{role:"tabpanel",hidden:t!==r,id:`dashboard-tabpanel-${r}`,"aria-labelledby":`dashboard-tab-${r}`,...n,children:t===r&&(0,L.jsx)(l.A,{sx:{pt:3},children:s})})}const O=()=>{const[e,s]=(0,r.useState)(!0),[t,i]=(0,r.useState)({totalSummaries:0,thisWeek:0,processingTime:0,successRate:0}),[a,u]=(0,r.useState)([]),[w,$]=(0,r.useState)(!1),[O,Q]=(0,r.useState)(""),[Z,q]=(0,r.useState)(""),[G,J]=(0,r.useState)(null),[K,N]=(0,r.useState)(0),[ee,se]=(0,r.useState)(!1),[te,re]=(0,r.useState)(null),[ne,le]=(0,r.useState)(0),[oe,ie]=(0,r.useState)(null),[ae,ce]=(0,r.useState)(0),[de,ue]=(0,r.useState)(""),[xe,me]=(0,r.useState)({}),{user:je}=(0,D.A)(),{socket:he}=(0,Y.h)(),pe=(0,M.Zp)(),Ae=["\ud575\uc2ec \uc694\uc57d","\uc0c1\uc138 \ubd84\uc11d","\uc2e4\ud589 \uac00\ub2a5\ud55c \uc778\uc0ac\uc774\ud2b8","\ud559\uc2b5 \ud3ec\uc778\ud2b8","Q&A \uc0dd\uc131","\ube44\uc988\ub2c8\uc2a4 \uc801\uc6a9"],ve=async()=>{try{var e,t,r,n;const[s,l]=await Promise.all([_.Ay.get("/summaries/stats"),_.Ay.get("/summaries?limit=6")]),o=(null===(e=s.data)||void 0===e?void 0:e.data)||s.data||{};i(o);const a=((null===(t=l.data)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.summaries)||(null===(n=l.data)||void 0===n?void 0:n.summaries)||[]).map(e=>{var s,t,r,n;const l=(null===(s=e.job)||void 0===s?void 0:s.status)||"completed",o=(null===(t=e.job)||void 0===t?void 0:t.progress)||100;let i="";var a,c,d;if("completed"===l)i=e.summaryContent&&e.summaryContent.trim()?e.summaryContent.substring(0,150)+(e.summaryContent.length>150?"...":""):null!==(a=e.metadata)&&void 0!==a&&null!==(c=a.results)&&void 0!==c&&null!==(d=c.summary)&&void 0!==d&&d.content?e.metadata.results.summary.content.substring(0,150)+"...":"Summary completed";else if("failed"===l){var u;i=(null===(u=e.job)||void 0===u?void 0:u.error)||"Processing failed"}else i="Processing...";const x=e.sourceType||(null!==(r=e.sourceUrl)&&void 0!==r&&r.includes("youtube.com")||null!==(n=e.sourceUrl)&&void 0!==n&&n.includes("youtu.be")?"youtube":"text"),m=e.provider||"gemini";return{...e,status:l,progress:o,preview:i,sourceType:x,provider:m}});u(a)}catch(de){console.error("Failed to fetch dashboard data:",de),F.Ay.error("Failed to load dashboard data")}finally{s(!1),$(!1)}};(0,r.useEffect)(()=>{if(!he||!te)return;const e=e=>{e.jobId===te&&le(e.progress||0)},s=e=>{if(e.jobId===te){var s,t;se(!1),le(100);const r=(null===(s=e.result)||void 0===s?void 0:s.summaries)||[{title:Ae[0],content:(null===(t=e.result)||void 0===t?void 0:t.summary)||e.result},{title:Ae[1],content:"\ucc98\ub9ac \uc911..."},{title:Ae[2],content:"\ucc98\ub9ac \uc911..."},{title:Ae[3],content:"\ucc98\ub9ac \uc911..."},{title:Ae[4],content:"\ucc98\ub9ac \uc911..."},{title:Ae[5],content:"\ucc98\ub9ac \uc911..."}];ie(r),F.Ay.success("\ucc98\ub9ac\uac00 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"),ve()}},t=e=>{e.jobId===te&&(se(!1),ue(e.error||"\ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),F.Ay.error("\ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."))};return he.on("job:progress",e),he.on("job:complete",s),he.on("job:error",t),()=>{he.off("job:progress",e),he.off("job:complete",s),he.off("job:error",t)}},[he,te]),(0,r.useEffect)(()=>{ve();const e=setInterval(ve,3e4);return()=>clearInterval(e)},[]);const be=e=>{pe(`/summaries/${e}`)},ye=e=>{const s=e.summaries||[{title:Ae[0],content:e.summary},{title:Ae[1],content:"\ucc98\ub9ac \uc911..."},{title:Ae[2],content:"\ucc98\ub9ac \uc911..."},{title:Ae[3],content:"\ucc98\ub9ac \uc911..."},{title:Ae[4],content:"\ucc98\ub9ac \uc911..."},{title:Ae[5],content:"\ucc98\ub9ac \uc911..."}];ie(s),se(!1),ve()};return e?(0,L.jsx)(E.A,{message:"Loading dashboard..."}):(0,L.jsxs)(l.A,{children:[(0,L.jsxs)(l.A,{mb:4,children:[(0,L.jsxs)(o.A,{variant:"h4",gutterBottom:!0,children:["\uc548\ub155\ud558\uc138\uc694, ",(null===je||void 0===je?void 0:je.name)||(null===je||void 0===je?void 0:je.phone),"\ub2d8! \ud83d\udc4b"]}),(0,L.jsx)(o.A,{variant:"body1",color:"text.secondary",children:"\uc624\ub298\uc740 \uc5b4\ub5a4 \ucf58\ud150\uce20\ub97c \uc694\uc57d\ud574\ub4dc\ub9b4\uae4c\uc694?"})]}),(0,L.jsxs)(m.Ay,{container:!0,spacing:3,mb:4,children:[(0,L.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,L.jsx)(V,{title:"\uc804\uccb4 \uc694\uc57d",value:t.totalSummaries,icon:(0,L.jsx)(T.A,{color:"primary"}),color:"primary"})}),(0,L.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,L.jsx)(V,{title:"\uc774\ubc88 \uc8fc",value:t.thisWeek,icon:(0,L.jsx)(R.A,{color:"success"}),color:"success",trend:12})}),(0,L.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,L.jsx)(V,{title:"\ud3c9\uade0 \ucc98\ub9ac\uc2dc\uac04",value:`${t.processingTime}\ucd08`,icon:(0,L.jsx)(B.A,{color:"info"}),color:"info"})}),(0,L.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,L.jsx)(V,{title:"\uc131\uacf5\ub960",value:`${t.successRate}%`,icon:(0,L.jsx)(C.A,{color:"success"}),color:"success"})})]}),(0,L.jsxs)(n.A,{sx:{p:3,mb:4},children:[(0,L.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"\ucf58\ud150\uce20 \uc785\ub825"}),(0,L.jsxs)(j.A,{value:K,onChange:(e,s)=>N(s),sx:{mb:3},children:[(0,L.jsx)(h.A,{icon:(0,L.jsx)(U.A,{}),label:"YouTube"}),(0,L.jsx)(h.A,{icon:(0,L.jsx)(k.A,{}),label:"\uc6f9\ud398\uc774\uc9c0"}),(0,L.jsx)(h.A,{icon:(0,L.jsx)(S.A,{}),label:"\ud30c\uc77c \uc5c5\ub85c\ub4dc"})]}),de&&(0,L.jsx)(p.A,{severity:"error",sx:{mb:2},children:de}),ee&&(0,L.jsxs)(l.A,{sx:{mb:2},children:[(0,L.jsx)(d.A,{variant:"determinate",value:ne}),(0,L.jsxs)(o.A,{variant:"caption",color:"text.secondary",children:["\ucc98\ub9ac \uc911... ",ne,"%"]})]}),(0,L.jsx)(H,{value:K,index:0,children:(0,L.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),O.trim()){ue(""),se(!0),le(0),ie(null);try{const e=await _.Ms.processUrl(O,"gemini");e.jobId?(re(e.jobId),F.Ay.success("\ucc98\ub9ac\ub97c \uc2dc\uc791\ud588\uc2b5\ub2c8\ub2e4...")):e.summary&&ye(e)}catch(r){var s,t;console.error("Error:",r),ue((null===(s=r.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.error)||"\ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4"),se(!1)}}else ue("YouTube URL\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694")},children:[(0,L.jsx)(A.A,{fullWidth:!0,label:"YouTube URL",placeholder:"https://www.youtube.com/watch?v=...",value:O,onChange:e=>Q(e.target.value),disabled:ee,InputProps:{startAdornment:(0,L.jsx)(v.A,{position:"start",children:(0,L.jsx)(U.A,{color:"error"})})},sx:{mb:2}}),(0,L.jsx)(x.A,{type:"submit",variant:"contained",fullWidth:!0,disabled:ee||!O.trim(),startIcon:ee?(0,L.jsx)(b.A,{size:20}):(0,L.jsx)(P.A,{}),children:ee?"\ucc98\ub9ac \uc911...":"YouTube \uc601\uc0c1 \uc694\uc57d\ud558\uae30"})]})}),(0,L.jsx)(H,{value:K,index:1,children:(0,L.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),Z.trim()){ue(""),se(!0),le(0),ie(null);try{const e=await _.Ms.processUrl(Z,"gemini");e.jobId?(re(e.jobId),F.Ay.success("\uc6f9\ud398\uc774\uc9c0 \ubd84\uc11d\uc744 \uc2dc\uc791\ud588\uc2b5\ub2c8\ub2e4...")):e.summary&&ye(e)}catch(r){var s,t;console.error("Error:",r),ue((null===(s=r.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.error)||"\ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4"),se(!1)}}else ue("\uc6f9\ud398\uc774\uc9c0 URL\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694")},children:[(0,L.jsx)(A.A,{fullWidth:!0,label:"\uc6f9\ud398\uc774\uc9c0 URL",placeholder:"https://example.com/article",value:Z,onChange:e=>q(e.target.value),disabled:ee,InputProps:{startAdornment:(0,L.jsx)(v.A,{position:"start",children:(0,L.jsx)(k.A,{color:"primary"})})},sx:{mb:2}}),(0,L.jsx)(x.A,{type:"submit",variant:"contained",fullWidth:!0,disabled:ee||!Z.trim(),startIcon:ee?(0,L.jsx)(b.A,{size:20}):(0,L.jsx)(P.A,{}),children:ee?"\ucc98\ub9ac \uc911...":"\uc6f9\ud398\uc774\uc9c0 \uc694\uc57d\ud558\uae30"})]})}),(0,L.jsx)(H,{value:K,index:2,children:(0,L.jsxs)(l.A,{sx:{border:"2px dashed",borderColor:"divider",borderRadius:2,p:4,textAlign:"center",cursor:"pointer","&:hover":{borderColor:"primary.main",bgcolor:"action.hover"}},component:"label",children:[(0,L.jsx)("input",{type:"file",hidden:!0,onChange:async e=>{const s=e.target.files[0];if(s)if(s.size>52428800)ue("\ud30c\uc77c \ud06c\uae30\ub294 50MB\ub97c \ucd08\uacfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4");else{J(s),ue(""),se(!0),le(0),ie(null);try{const e=await _.Ms.uploadFile(s,"gemini",e=>{le(e)});e.jobId?(re(e.jobId),F.Ay.success("\ud30c\uc77c \ucc98\ub9ac\ub97c \uc2dc\uc791\ud588\uc2b5\ub2c8\ub2e4...")):e.summary&&ye(e)}catch(n){var t,r;console.error("Error:",n),ue((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error)||"\ud30c\uc77c \uc5c5\ub85c\ub4dc \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4"),se(!1)}}},accept:".pdf,.docx,.txt,.mp3,.mp4,.wav",disabled:ee}),(0,L.jsx)(S.A,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,L.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"\ud30c\uc77c\uc744 \uc120\ud0dd\ud558\uac70\ub098 \ub4dc\ub798\uadf8\ud558\uc138\uc694"}),(0,L.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"PDF, DOCX, TXT, MP3, MP4, WAV (\ucd5c\ub300 50MB)"}),G&&(0,L.jsx)(c.A,{label:G.name,onDelete:()=>J(null),sx:{mt:2}})]})})]}),oe&&(0,L.jsxs)(n.A,{sx:{mb:4,p:3},children:[(0,L.jsx)(o.A,{variant:"h6",gutterBottom:!0,children:"\uc694\uc57d \uacb0\uacfc"}),(0,L.jsx)(j.A,{value:ae,onChange:(e,s)=>ce(s),variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider"},children:oe.map((e,s)=>(0,L.jsx)(h.A,{label:e.title||Ae[s]},s))}),oe.map((e,s)=>(0,L.jsxs)(H,{value:ae,index:s,children:[(0,L.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,L.jsx)(o.A,{variant:"h6",color:"primary",children:e.title||Ae[s]}),(0,L.jsx)(y.A,{title:"\ubcf5\uc0ac",children:(0,L.jsx)(f.A,{onClick:()=>((e,s)=>{navigator.clipboard.writeText(e),me({...xe,[s]:!0}),F.Ay.success("\ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4"),setTimeout(()=>{me({...xe,[s]:!1})},2e3)})(e.content,s),size:"small",children:xe[s]?(0,L.jsx)(C.A,{color:"success"}):(0,L.jsx)(I.A,{})})})]}),(0,L.jsx)(g.A,{sx:{mb:2}}),(0,L.jsx)(o.A,{variant:"body1",sx:{whiteSpace:"pre-wrap",lineHeight:1.8},children:e.content})]},s))]}),(0,L.jsxs)(l.A,{children:[(0,L.jsxs)(l.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,L.jsx)(o.A,{variant:"h6",children:"\ucd5c\uadfc \uc694\uc57d"}),(0,L.jsx)(y.A,{title:"\uc0c8\ub85c\uace0\uce68",children:(0,L.jsx)(f.A,{onClick:()=>{$(!0),ve()},disabled:w,children:(0,L.jsx)(z.A,{})})})]}),0===a.length?(0,L.jsxs)(n.A,{sx:{p:4,textAlign:"center"},children:[(0,L.jsx)(o.A,{variant:"body1",color:"text.secondary",paragraph:!0,children:"\uc544\uc9c1 \uc694\uc57d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. YouTube \ub9c1\ud06c\ub97c \uc785\ub825\ud558\uc5ec \uc2dc\uc791\ud558\uc138\uc694!"}),(0,L.jsx)(x.A,{variant:"contained",color:"error",startIcon:(0,L.jsx)(W.A,{}),onClick:()=>pe("/"),children:"YouTube \uc694\uc57d \uc2dc\uc791"})]}):(0,L.jsx)(m.Ay,{container:!0,spacing:3,children:a.map(e=>(0,L.jsx)(m.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,L.jsx)(X,{summary:e,onView:be})},e.id))})]})]})}}}]);
//# sourceMappingURL=479.16ff2c05.chunk.js.map